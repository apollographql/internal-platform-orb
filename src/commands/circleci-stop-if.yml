description: >-
  Helper command which will `halt` the entire execution of the running `job` if the value of
  tested parameter is the value of the expectation parameter.

  when conditions are great, but you could use this as a pre-step in a workflow to avoid executing a job

parameters:
  tested:
    type: string
  expectation:
    type: string

steps:
  - run:
      name: Halt if tested = expectation
      command: |
        if [ "<< parameters.tested >>" = "<< parameters.expectation >>" ];
        then
          circleci-agent step halt
        fi
