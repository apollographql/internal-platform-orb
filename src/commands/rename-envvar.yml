description: Renames an environment variable and optionally removes the old environment variable.
parameters:
  old-variable:
    type: env_var_name
    description: The name of the existing environment variable
  new-variable:
    type: env_var_name
    description: The name of the environment variable to be created
  clean:
    description: Set if the old environment variable should be removed
    type: enum
    enum: ["", "true"]
    default: ""
steps:
  - run:
      name: Rename Environment Variable
      command: |
        export << parameters.new-variable >>="${<< parameters.old-variable >>}"
        echo "export << parameters.new-variable >>=\"${<< parameters.old-variable >>}\"" >> $BASH_ENV
        if [[ -n << parameters.clean >> ]]; then
          unset << parameters.old-variable >>
          sed -i '/<< parameters.old-variable >>/d' $BASH_ENV
        fi
